<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to the Snap URL</title>
    <link rel="icon" type="image/x-icon" href="/snapurl/surl-favicon.ico">
    <style>
        * {
          box-sizing: border-box;
        }
    
    .navi {
      float: left;
      width: 20%;
      text-align: center;
    }
    
    .navi a {
      background-color: #e5e5e5;
      padding: 8px;
      margin-top: 7px;
      display: block;
      width: 100%;
      color: black;
    }
    
    .main {
      float: left;
      width: 60%;
      padding: 0 20px;
    }
    
    .right {
      background-color: #e5e5e5;
      float: left;
      width: 20%;
      padding: 15px;
      margin-top: 7px;
      text-align: center;
    }
    
    @media only screen and (max-width: 620px) {
      /* For mobile phones: */
      .menu, .main, .right {
        width: 100%;
      }
    }
    a {
      color: #0033cc;
    }
    
        .payment-form {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .payment-form h2 {
            margin-bottom: 20px;
        }
        .payment-form input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .payment-form button {
            width: 100%;
            padding: 10px;
            background-color: #5cb85c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .payment-form button:hover {
            background-color: #4cae4c;
        }
        .payment-form label {
            display: block;
        }
        
    @media (prefers-color-scheme: dark) {
      body {
        color: #eee;
        background: #121212;
      }
      a {
       color: #99ccff;
      }
    }
   </style>
   <script src="./common.js" language="Javascript"></script>
   <script type="text/javascript" src="editor/nicEdit.js"></script>
   <script>
       var myNicEditor
       
       function genURL() {
           const mess = myNicEditor.instanceById('myInstance1').getContent()
           
           ajax.post({url:"/rustcgi/snapurl", query: "message="+encodeURIComponent(mess)
           , success: function (data) { 
                 if (data.startsWith('Ok')) {
                    //alert('this URL:'+data.substring(2))
                    const urldiv = document.getElementById('url2');
                    urldiv.innerHTML = 'http://win-pc/snapurl/?id=' + data.substring(2)
                 } 
             }, respType:"html"})
       }
   </script>
  </head>
  <body>
    <div style="background-color:#e5e5e5;padding:15px;text-align:center;" id="url2">
      Link to share will be there
    </div>
    
    <div style="overflow:auto">
      <div class="navi">
        some text will be there
      </div>
    
      <div class="main">
        <script type="text/javascript">
             bkLib.onDomLoaded(function() {
                  myNicEditor = new nicEditor({iconsPath : './editor/nicEditorIcons.gif'});
                  myNicEditor.setPanel('myNicPanel');
                  myNicEditor.addInstance('myInstance1');
                  const queryString = window.location.search;
                  const urlParams = new URLSearchParams(queryString);
                  const keyid = urlParams.get('id')
                  if (keyid) {
                      ajax.get({url:"/rustcgi/snapurl/"+keyid, success: function(txt) {
                          const txtdiv = document.getElementById('myInstance1');
                          txtdiv.innerHTML = txt
                      }, respType:"html"})
                  }
             });
        </script>
        <div id="myNicPanel" style="width: 350px;"></div>
        <br /><br />
        
        <h4>Your message</h4>
        <div id="myInstance1" style="font-size: 16px; background-color: #ccc; padding: 3px; width: 400px;">
       
        </div>
        <button type="button" onclick="genURL()">Get URL</button>
      </div>
    
      <div class="right">
        <h2>Payment info</h2>
        <form action="submit_payment" method="post" class="payment-form">
            <label for="card-name">Name on Card:</label>
            <input type="text" id="card-name" name="card-name" required>
            <label for="card-number">Card Number:</label>
            <input type="text" id="card-number" name="card-number" required>
            <label for="card-expiry">Expiry Date (MM/YY):</label>
            <input type="text" id="card-expiry" name="card-expiry" required>
            <label for="card-cvc">CVC:</label>
            <input type="text" id="card-cvc" name="card-cvc" required>
            
            <label for="billing-address">Billing Address:</label>
            <input type="text" id="billing-address" name="billing-address" required>
            <label for="city">City:</label>
            <input type="text" id="city" name="city" required>
            <label for="state">State:</label>
            <input type="text" id="state" name="state" required>
            <label for="zip-code">Zip Code:</label>
            <input type="text" id="zip" name="zip" required>
            <button type="submit">Pay Now</button>
        </form>
      </div>
    </div>
    
    <div style="background-color:#e5e5e5;text-align:center;padding:10px;margin-top:7px;">&copy; <script>document.write(new Date().getFullYear())</script> Snap URL</div>
  </body>
</html>